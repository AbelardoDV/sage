{% extends 'pages/base.html' %}

{% load static %}

{% block content %}
<div class="d-flex justify-content-center">
<button id="dibujar_lncel" class="btn btn-info">
  <span id="dibujar_lncel_loading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
  Dibujar LNCEL (requiere: WebCell4g.csv)</button>
<button id="dibujar_3g_adj" class="btn btn-warning ">
  <span id="dibujar_3g_adj_loading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
  Dibujar 3G ADJ (requiere: 3gADJ.csv)</button>

</div>

<div class="container p-3 my-3 border">
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    <div class="container">
      
      <div class="custom-file">
        <input type="file" name="myfile" class="custom-file-input" id="customFileLang" lang="es">
        <label class="custom-file-label" for="customFileLang">Seleccionar CSV</label>
      </div>
      <br>
      <br>
      
      <button type="submit"  class="btn btn-primary float-right">Subir al servidor</button>
      <br>
      <br>
    </div>
  </form>
</div>

<div class="container">
  {% if uploaded_file_url %}
  <p>File uploaded at: <a href="{{ uploaded_file_url }}">{{ uploaded_file_url }}</a></p>
  {% endif %}

  <p></p>
  <ul class="list-group"></ul>
  <li class="list-group-item active">Lista de archivos subidos</li>
  {% for file in list_files %}
  <li class="list-group-item">
    <a href="../static/files/{{file}}">{{ file }}</a>
  </li>
  {% endfor %}
  </ul>
</div>
{% endblock %}

{% block javascript %}

<script type = "text/JavaScript">
$("#dibujar_lncel_loading").hide();
$("#dibujar_3g_adj_loading").hide();

$('#dibujar_lncel').click(function(){
  $("#dibujar_lncel_loading").show();
  $.get("../polls/dibujar_lncel/", function(data, status){
    alert("Status: " + status);
    $("#dibujar_lncel_loading").hide();
  });
});

$('#dibujar_3g_adj').click(function(){
  $("#dibujar_3g_adj_loading").show();
  $.get("../polls/dibujar_3g_adj/", function(data, status){
    alert("Status: " + status);
    $("#dibujar_3g_adj_loading").hide();
  });
 
});
</script>
{% endblock %}